<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/g.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/g.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/g.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="躲不掉的风">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="躲不掉的风">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="躲不掉的风">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/2/">





  <title>躲不掉的风</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">躲不掉的风</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="Searching..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/07/Excel学习/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="躲不掉的风">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="躲不掉的风">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/07/Excel学习/" itemprop="url">Excel学习记录</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-03-07T18:12:57+08:00">
                2020-03-07
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="1-数据透视表"><a href="#1-数据透视表" class="headerlink" title="1. 数据透视表"></a>1. 数据透视表</h4><p>位置：插入-数据透视表确认</p>
<p>作用：可以将数据归类分组统计，以各种组合和形式展示出数据值</p>
<p>方法：</p>
<pre><code>1. 选中待整理数据源某单元格，选择插入-数据透视表确认
2. 向行列拖拽要统计项
3. 对已完成数据项处理：点击项目右键选择组合，可选择按照年或者月或者季度等重新组合
4. 对已完成数据值处理：双击左上角默认的求和项单元格，可选择以百分比还是计数等方式展示数值</code></pre><p><img src="/images/pasted-80.png" alt="upload successful"></p>
<h4 id="2-条件格式"><a href="#2-条件格式" class="headerlink" title="2. 条件格式"></a>2. 条件格式</h4><p>位置：开始-条件格式</p>
<p>作用：标记数据范围(大于小于…)、标记重复值、标记涨跌、使用数据条<br><img src="/images/pasted-91.png" alt="upload successful"></p>
<ol>
<li><p>标记数据范围：选中某列数据，选择条件格式中突出显示的比如大于，填写数值或者选中已有单元格，再选择想要标记的格式后确定</p>
</li>
<li><p>标记重复值：选中某列数据，选择条件格式中突出显示的重复值，选择想要标记的格式后确定</p>
</li>
<li><p>标记涨跌：大于某列的值标记红色，小于标记绿色<br> 步骤：   </p>
<ol>
<li>选中某标准数据单元格后一个单元格，按照步骤1中选择大于，对比值选中标准单元格，但需要手工删掉如B3前面两个美元符号(有美元符号代表固定的单元格)；</li>
<li>同样方式选中小于的情况</li>
<li>以上设置的格式使用格式刷刷满所有单元格</li>
</ol>
</li>
<li><p>使用数据条：选中单元格，选择条件格式中的数据条或色阶</p>
</li>
<li><p>几个单元格的加减法计算(先输入等号–&gt;选中数据单元格–&gt;加号)。</p>
<p> <img src="/images/pasted-83.png" alt="upload successful"></p>
</li>
<li><p>点击结果单元格出现实线➕后双击，可实现同拖拽至整列的效果。</p>
</li>
<li><p>若加法计算的个别单元格是固定的呢？选中该表达式–&gt;F4使其前面添加美元符号(锁定该单元格)</p>
<p><img src="/images/pasted-84.png" alt="upload successful"></p>
</li>
</ol>
<h4 id="3-动态数据分析报表-切片器"><a href="#3-动态数据分析报表-切片器" class="headerlink" title="3. 动态数据分析报表-切片器"></a>3. 动态数据分析报表-切片器</h4><p>位置：插入-切片器</p>
<ol>
<li><p>若左边直接不能拖拽怎么办(版本不同导致)？</p>
<p> 右键选择数据透视表选项-显示-经典数据透视表布局</p>
</li>
<li><p>创建统计图   </p>
<p> 选中透视表某单元格数据-&gt;插入-&gt;选中某图形(折线图/柱状图等)-&gt;设计中更改样式</p>
</li>
<li><p>对透视图加<strong>切片器</strong></p>
<p> 切片器作用：可以直接进行筛选</p>
<p> 选中透视表某单元格数据-插入-切片器-设计中更改样式</p>
</li>
<li><p>切片器连接图其他透视表</p>
<p>  选中已有切片器-右键选中报表连接</p>
</li>
</ol>
<h4 id="4-单元格数字格式-分列"><a href="#4-单元格数字格式-分列" class="headerlink" title="4. 单元格数字格式-分列"></a>4. 单元格数字格式-分列</h4><p>   位置：数据-分列</p>
<ol>
<li><p>文本和数字格式区别？</p>
<p> 文本类型一般左上角有绿色箭头标志<br> <img src="/images/pasted-86.png" alt="upload successful"></p>
<p> 文本无法转换成别的格式？使用<strong>分列</strong>解决</p>
</li>
<li><p><strong>分列</strong>：本身作用是对一列数据根据分隔符分成多列，但是最后一步可以设置某列格式。</p>
<p> 实际常用来进行格式转换</p>
<p> 有事没事用分列来转换一下，保险 ~    </p>
</li>
</ol>
<h4 id="5-排序"><a href="#5-排序" class="headerlink" title="5. 排序"></a>5. 排序</h4><p>位置：开始-排序和筛选</p>
<ol>
<li><p>普通排序：按照值升降排序、按照单元格颜色排序</p>
</li>
<li><p>自定义序列：选项-自定义序列，添加自定义的序列-&gt;在数据表使用自定义的序列排序</p>
</li>
<li><p>改变行顺序：比如制作工资条，每个单元格前添加一行</p>
</li>
</ol>
<p>方法： 新增一列 使用数值 12345 和1.5 2.5 3.5 然后进行排序<br><img src="/images/pasted-87.png" alt="upload successful"></p>
<h4 id="6-筛选"><a href="#6-筛选" class="headerlink" title="6. 筛选"></a>6. 筛选</h4><p>位置：开始-排序和筛选</p>
<ol>
<li><p>自动筛选<br> 点击某单元格点击筛选即可；数值可根据大于等于筛选；文本可根据开头结尾等筛选</p>
<p> 若筛选时需筛选星号(默认代表任意字符) ，则需通过<del>转义，如筛选B</del>* </p>
</li>
<li><p>高级筛选</p>
<p>  在数据表旁边新加筛选项-&gt;选中数据任何单元格-&gt;选择高级筛选-》在条件区域里选中刚刚新增的筛选项(记得带上标题)</p>
<p> 高级筛选可做且和或的筛选关系，其中或是自动筛选无法办到的(同行是且不同行是或)</p>
<p> <img src="/images/pasted-88.png" alt="upload successful"></p>
</li>
<li><p>透视表筛选<br> 直接通过某筛选列进行筛选</p>
<p> <img src="/images/pasted-90.png" alt="upload successful"></p>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/28/Linux系统实践问题/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="躲不掉的风">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="躲不掉的风">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/02/28/Linux系统实践问题/" itemprop="url">Linux系统实践问题记录</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-02-28T14:18:35+08:00">
                2020-02-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ol>
<li><p>记录一次在Linux（Ubuntu）中date命令无效的情况</p>
<p> 解决方案参考<a href="http://blog.sina.cn/dpool/blog/s/blog_413d250e0102z2iy.html" target="_blank" rel="noopener">http://blog.sina.cn/dpool/blog/s/blog_413d250e0102z2iy.html</a></p>
<pre><code>1、sudo timedatectl set-ntp false
2、sudo date -s &apos;2020-2-20 12:12:12&apos;
此时通过命令查看时间的话，就可以发现日期修改成功了，而如果需要将时间同步回去，直接执行 sudo timedatectl set-ntp true即可。</code></pre><p>更改时区：tzselect命令</p>
<p>参考：<a href="https://blog.csdn.net/zhengchaooo/article/details/79500032" target="_blank" rel="noopener">https://blog.csdn.net/zhengchaooo/article/details/79500032</a></p>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/06/shell-通配符和正则/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="躲不掉的风">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="躲不掉的风">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/02/06/shell-通配符和正则/" itemprop="url">shell 通配符和正则表达式</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-02-06T21:08:33+08:00">
                2020-02-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h5 id="通配符和正则"><a href="#通配符和正则" class="headerlink" title="通配符和正则"></a>通配符和正则</h5><ul>
<li><p>shell 元字符(也称为通配符) 由 shell 来解析，如 rm -rf <em>.pdf，元字符</em> Shell 将其解析为任意 多个字符</p>
<p>正则表达式元字符 由各种执行模式匹配操作的程序来解析，比如 vi、grep、sed、awk、python</p>
</li>
<li><p>shell中定义元字符</p>
<pre><code>*   任意字符
?  单个任意字符
[] 子shell ，不会影响主shell
[^abcd]这里^是非的意思，但是外面不支持，不同与正则。正则[]里面同此，外面使用是以什么开头的意思
{} 集合</code></pre></li>
</ul>
<ul>
<li><p>基本正则表达式元字符:</p>
<pre><code>元字符 功能 示例 ======================================================== ^ 行首定位符 ^love
$ 行尾定位符 love$
. 匹配单个任意字符 l..e
* 匹配前导符 0 到多次 ab*love
.* 任意多个字符
[] 匹配指定范围内的一个字符 [lL]ove
[ - ] 匹配指定范围内的一个字符 [a-z0-9]ove
[^] 匹配不在指定组内的字符 [^a-z0-9]ove
\ 用来转义元字符 love\.
\&lt; 词首定位符 \&lt;love
\&gt; 词尾定位符 love\&gt;
\(..\) 匹配稍后使用的字符的标签 :% s/172.16.130.1/172.16.130.5/ :% s/\(172.16.130.\)1/\15/
:% s/\(172.\)\(16.\)\(130.\)1/\1\2\35/
:3,9 s/\(.*\)/#\1/
x\{m\} 字符 x 重复出现 m 次 o\{5\}
x\{m,\} 字符 x 重复出现 m 次以上 o\{5,\} x\{m,n\} 字符x重复出现m到n次o\{5,10\}</code></pre></li>
<li><p>扩展正则表达式元字符（egrep或使用转义\）</p>
<pre><code>+ 匹配一个或多个前导字符 [a-z]+ove
? 匹配零个或一个前导字符 lo?ve
a|b 匹配 a 或 b love|hate
() 组字符 loveable|rs love(able|rs) ov+ (ov)+ (..)(..)\1\2 标签匹配字符 (love)able\1er x{m} 字符x重复m次o{5}
x{m,} 字符 x 重复至少 m 次 o{5,}
x{m,n} 字符x重复m到n次o{5,10}</code></pre></li>
<li><p>其他</p>
<pre><code>\w  所有字母和数字 相当于[a-zA-Z0-9]*
\W  非字母和数字
\b  边界</code></pre></li>
</ul>
<h5 id="grep命令"><a href="#grep命令" class="headerlink" title="grep命令"></a>grep命令</h5><ul>
<li><p>习惯性加上单引号</p>
</li>
<li><p>返回状态exit 0 1 2</p>
</li>
<li><p>grep -e  相当于 egrep </p>
</li>
<li><p>grep  –help |grep ‘-v’<br>其中-v被认为是选项，非模式，所以需要转义</p>
</li>
</ul>
<pre><code>-i, --ignore-case         忽略大小写
-v, --invert-match        选中不匹配的行
-q, --quiet, --silent     不显示所有常规输出
-r, --recursive           等同于--directories=recurse递归目录

-o, --only-matching       只显示匹配PATTERN 部分的行
-B, --before-context=NUM  打印文本及其前面NUM 行
-A, --after-context=NUM   打印文本及其后面NUM 行
-C, --context=NUM         打印NUM 行输出文本

-n, --line-number         输出的同时打印行号</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/06/shell-变量和数组/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="躲不掉的风">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="躲不掉的风">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/02/06/shell-变量和数组/" itemprop="url">shell 变量和数组</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-02-06T20:17:32+08:00">
                2020-02-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h4><ul>
<li><p>查看变量: echo $变量名 set(所有变量:包括自定义变量和环境变量) </p>
</li>
<li><p>取消变量: unset 变量名</p>
</li>
<li><p>位置变量：如通过$1 $2获取第一第二个参数</p>
</li>
<li><p>环境变量：export back_dir=xxxx  定义全局变量；或者export $var 转化成全局变量</p>
</li>
<li><p>预定义变量</p>
<pre><code>$0 脚本名
$* 所有的参数
$@ 所有的参数
$# 参数的个数
$$ 当前进程的 PID
$! 上一个后台进程的 PID
$? 上一个命令的返回值 0 表示成功</code></pre><p>$@和$星区别：不加引号时,二者都是返回传入的参数,但加了引号后（”$@”）,此时$*把参数作为一个字符串整体(单字符串)返回,$@把每个参数作为一个字符串返回</p>
</li>
<li><p>键盘输入变量：通过read -n 2 -p “please input: “ p</p>
</li>
</ul>
<ul>
<li><p>调用其他脚本变量值：可在b脚本中通过调用.a.sh,直接获取a的变量数据</p>
</li>
<li><p>“”双引号-强引用会替换里面变量值；’’-弱引用，原样输出引用符号</p>
</li>
<li><p>变量删除（获取部分字符串）</p>
<pre><code>${url#*a}  从头到尾最短匹配删除即直到第一个a之前的都删除
${url##*a}  从头到尾贪婪匹配，删除直到最后一个匹配a
${url%a*}  后面加%，从后到前最短匹配删除a后面所有字符    
${url%%}  后面加%，从后到前贪婪匹配删除最后一个a后面所有字符</code></pre></li>
<li><p>变量替换(最短替换/和贪婪替换//)</p>
<pre><code>liyuan$ var=tom.ton.com
liyuan$ echo ${var/to/TO}
TOm.ton.com
liyuan$ echo ${var//to/TO}</code></pre></li>
</ul>
<ul>
<li><p>变量替代；可理解为变量初始化</p>
<pre><code>echo ${var1-aaaaa}
echo ${var1:-aaaaa}</code></pre><p>  使用 <font color="red">-</font> ,若没有被赋值过，就使用默认值替代(是否unset)</p>
<p>  使用 <font color="red">:-</font>，区别在于即使赋值空值也会被新值替代(是否为空值)</p>
</li>
<li><p>切片操作  echo ${url:5:7}</p>
</li>
<li><p>可使用反引号或者$()执行内部命令</p>
</li>
<li><p>date +%F  格式化日期输出</p>
</li>
<li><p>特殊符号总结</p>
<pre><code>（） 子shell执行
(()) 数值比较
$()  命令替换，同反引号
$(()) 整数运算

{}  集合
${}  变量

[]  条件测试
[[]] 条件测试，支持正则 =~
$[]  整数运算</code></pre></li>
</ul>
<h4 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h4><ol>
<li><p>普通数组</p>
<pre><code>一次赋多值，可指定索引
# array2=(tom jack alice [20]=aa)
# echo ${!array2[@]}
0 1 2 20</code></pre></li>
<li><p>关联数组</p>
<p> 必须申明关联数组变量</p>
<pre><code># declare -A ass_array1
# ass_array2=([index1]=tom [index2]=jack [index4]=&apos;bash shell&apos;)

查看数组
# declare -A</code></pre></li>
<li><p>访问数组元数:</p>
<pre><code># echo ${ass_array2[index2]} 访问数组中的第二个元数
# echo ${ass_array2[@]} 访问数组中所有元数 等同于 echo ${array1[*]} 
# echo ${#ass_array2[@]} 获得数组元数的个数
# echo ${!ass_array2[@]} 获得数组元数的索引</code></pre></li>
<li><p>遍历数组</p>
<p>通过获取数组索引遍历   </p>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/06/shell-函数/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="躲不掉的风">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="躲不掉的风">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/02/06/shell-函数/" itemprop="url">shell 函数</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-02-06T20:07:46+08:00">
                2020-02-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h5 id="1-定义函数"><a href="#1-定义函数" class="headerlink" title="1. 定义函数"></a>1. 定义函数</h5><h6 id="方法一（常用）"><a href="#方法一（常用）" class="headerlink" title="方法一（常用）:"></a>方法一（常用）:</h6><pre><code>函数名() { 函数要实现的功能代码 }</code></pre><h6 id="方法二"><a href="#方法二" class="headerlink" title="方法二:"></a>方法二:</h6><pre><code>function 函数名 { 函数要实现的功能代码 }</code></pre><h5 id="调用函数"><a href="#调用函数" class="headerlink" title="调用函数"></a>调用函数</h5><pre><code>函数名 函数名参数1 参数2</code></pre><p>举例：</p>
<pre><code>#!/usr/bin/bash
jiecheng(){
result=1
for i in `seq $1`
do
        echo $i
        result=$[$result*$i]
done
echo $result
}

jiecheng $1

1.实践证明，do中的result必须不能加$符号，否则错误
2.$[]运算结果赋值的时候，=左右不能有空格</code></pre><h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><ul>
<li><p>函数接收位置参数 $1 $2… $n</p>
</li>
<li><p>函数接收数组变量使用$@ $*</p>
</li>
<li><p>函数接收参数个数$#</p>
</li>
<li><p>函数将受到的所有参数赋值给数组 newarray=($*)</p>
</li>
<li><p>养成在函数内部的变量习惯性加local关键字供内部函数使用的习惯</p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/06/shell-条件测试/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="躲不掉的风">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="躲不掉的风">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/02/06/shell-条件测试/" itemprop="url">shell 条件测试</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-02-06T12:21:04+08:00">
                2020-02-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Shell 条件测试</p>
<pre><code>格式 1: test 条件表达式 
格式 2: [ 条件表达式 ] 
格式 3: [[ 条件表达式 ]]</code></pre><ol>
<li><p>文件测试</p>
<pre><code>test -d /home
[ -e dir|file ]  True if file exists (regardless of type)
[ -d dir ] True if file exists and is a directory.
[ -f file ] True if file exists and is a regular file.
[ -d /ccc ] || mkdir /ccc</code></pre></li>
<li><p>数值比较 </p>
<pre><code>[ 整数1  操作符  整数2] 
[ 1 -gt 10 ] 大于
[ 1 -eq 10 ] 等于</code></pre></li>
<li><p>数值比较–C语言风格 </p>
<pre><code>[root@xxxx ~]# ((1&lt;2));echo $?
0
[root@xxxx ~]# ((1==2));echo $?</code></pre></li>
<li><p>字符串比较</p>
<pre><code>等号
[root@xxxx ~]# [ &quot;$USER&quot; = &quot;root&quot; ];echo $?
[root@xxxx ~]# [ -z &quot;$var1&quot; ];echo $?
条件判断
[root@xxxx ~]# [ 1 -lt 2 -a 5 -gt 10 ];echo $?
[root@xxxx ~]# [ 1 -lt 2 -o 5 -gt 10 ];echo $?
使用正则    
[root@yangs ~]# [[ &quot;$num10&quot; =~ ^[0-9]+$ ]];echo $?</code></pre><p> 【注】:变量为空 或 未定义: 长度都为 0</p>
</li>
<li><p>eq  ge等用于数字比较</p>
<p>= &gt;等都是字符串比较    </p>
<p> 字符串比较一般要加双引号</p>
</li>
<li><p>在shell脚本里，推荐按以下方式声明和使用布尔类型。</p>
<pre><code>bool=true
if [ &quot;$bool&quot; = true ]; then
if [ &quot;$bool&quot; = &quot;true&quot; ]; then
if [[ &quot;$bool&quot; = true ]]; then
if [[ &quot;$bool&quot; = &quot;true&quot; ]]; then
if [[ &quot;$bool&quot; == true ]]; then
if [[ &quot;$bool&quot; == &quot;true&quot; ]]; then
if test &quot;$bool&quot; = true; then
if test &quot;$bool&quot; = &quot;true&quot;; then</code></pre></li>
</ol>
<ol start="7">
<li><p>实例 判断bool变量不存在或者为false</p>
<pre><code>if [ ${#usePFB} -eq 0 -o &quot;$usePFB&quot; = &quot;false&quot; ]</code></pre></li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/03/Go语言/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="躲不掉的风">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="躲不掉的风">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/02/03/Go语言/" itemprop="url">Go语言</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-02-03T19:56:22+08:00">
                2020-02-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="IDE"><a href="#IDE" class="headerlink" title="IDE"></a>IDE</h4><p>官网下载atom，并安装go-plus插件</p>
<h4 id="运行程序"><a href="#运行程序" class="headerlink" title="运行程序"></a>运行程序</h4><pre><code>go run hello.go
或者
$ go build hello.go 
$ ls
hello    hello.go
$ ./hello</code></pre><h4 id="特点-与其他语言差别"><a href="#特点-与其他语言差别" class="headerlink" title="特点:与其他语言差别"></a>特点:与其他语言差别</h4><ul>
<li><p>应用程序入口</p>
<ol>
<li>必须是 main 包：package main</li>
<li>必须是 main ⽅法：func main()</li>
<li>⽂件名不⼀定是 main.go</li>
</ol>
</li>
<li><p>Go 中 main 函数不⽀持任何返回值<br>通过 os.Exit 来返回状态</p>
</li>
<li><p>main 函数不⽀持传⼊参数 func main(arg []string) 是错误的<br>在程序中直接通过 os.Args 获取命令⾏参数 </p>
</li>
<li><p>编写测试程序</p>
<ol>
<li>源码⽂件以 _test 结尾：xxx_test.go</li>
<li>测试⽅法名以 Test 开头：func TestXXX(t *testing.T){}</li>
</ol>
<p>运行测试程序：</p>
<p>1）Atom-&gt;preferences-&gt;packages<br>搜索找到go-plus<br>在settings中，Test配置中选中 Run with verbose flag setting<br>2）若不好用，可以用修改快捷键绑定keymap.cson文件,先执行保存再使用快捷键运行</p>
</li>
<li><p>不支持隐式类型转换，如Int和Int64。别名和原有类型也不能进⾏隐式类型转换</p>
</li>
<li><p>不支持指针运算</p>
</li>
<li><p>运算符之后后置++和–</p>
</li>
<li><p>&amp;^ 运算符：只要后面是1，结果变成0，否则为左边值即不变</p>
<p>   1 &amp;^ 0 – 1<br>   1 &amp;^ 1 – 0<br>   0 &amp;^ 1 – 0<br>   0 &amp;^ 0 – 0</p>
</li>
<li><p>string 是值类型，其默认的初始化值为空字符串，⽽不是 nil</p>
</li>
<li><p>Go 语⾔仅⽀持循环关键字 for</p>
</li>
<li><p>条件语句</p>
<ol>
<li>condition 表达式结果必须为布尔值</li>
<li>⽀持变量赋值：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if  var declaration;  condition &#123;</span><br><span class="line">    // code to be executed if condition is true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>switch条件</p>
<ol>
<li>条件表达式不限制为常量或者整数；</li>
<li>单个 case 中，可以出现多个结果选项, 使⽤逗号分隔；</li>
<li>Go 语⾔不需要⽤break来明确退出⼀个 case；</li>
<li>可以不设定 switch 之后的条件表达式，在此种情况下，整个 switch 结构与多个 if…else… 的逻辑作⽤等同</li>
</ol>
</li>
</ul>
<h5 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h5><ul>
<li>数组的声明<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var a [3] int //声明并初始化为默认零值</span><br><span class="line">a[0] = 1</span><br><span class="line">b := [3]int&#123;1, 2, 3&#125; //声明同时初始化</span><br></pre></td></tr></table></figure>


</li>
</ul>
<ul>
<li>数组元素遍历</li>
</ul>
<pre><code>func TestTravelArray(t *testing.T) {
 a := [...]int{1, 2, 3, 4, 5} //不指定元素个数
 for idx/*索引*/, elem/*元素*/ := range a {
 fmt.Println(idx, elem)
 }</code></pre><ul>
<li><p>数组截取</p>
<pre><code>a := [...]int{1, 2, 3, 4, 5}
a[1:2] //2
a[1:3] //2,3
a[1:len(a)] //2,3,4,5
a[1:] //2,3,4,5
a[:3] //1,2,3</code></pre><p>  负数索引？不支持</p>
</li>
</ul>
<h5 id="Go-语言切片-Slice"><a href="#Go-语言切片-Slice" class="headerlink" title="Go 语言切片(Slice)"></a>Go 语言切片(Slice)</h5><p>Go 语言切片是对数组的抽象。</p>
<p>Go 数组的长度不可改变，在特定场景中这样的集合就不太适用，Go中提供了一种灵活，功能强悍的内置类型切片(“动态数组”),与数组相比切片的长度是不固定的，可以追加元素，在追加时可能使切片的容量增大。 </p>
<ul>
<li><p>初始化同数组，缺少长度 </p>
</li>
<li><p>数组可以比较，切片不可比较</p>
<p>切⽚声明</p>
<pre><code> var s0 []int
 s0 = append(s0, 1)
 s := []int{}
 s1 := []int{1, 2, 3}
 s2 := make([]int, 2, 4)  
make参数/*[]type, len, cap
其中len个元素会被初始化为默认零值，未初始化元素不可以访问
*/</code></pre></li>
<li><p>len() cap()  make()</p>
<p>append() 和 copy() 函数</p>
</li>
</ul>
<h5 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h5><ul>
<li><p>Map 声明</p>
<p>  声明变量，默认 map 是 nil</p>
<pre><code>var map_variable map[key_data_type]value_data_type</code></pre><p>  使用 make 函数</p>
<pre><code>map_variable := make(map[key_data_type]value_data_type)</code></pre><p>  举例：</p>
<pre><code>m := map[string]int{&quot;one&quot;: 1, &quot;two&quot;: 2, &quot;three&quot;: 3}
m1 := map[string]int{}
m1[&quot;one&quot;] = 1
m2 := make(map[string]int, 10 /*Initial Capacity*/)</code></pre></li>
<li><p>在访问的 Key 不存在时，仍会返回零值，不能通过返回 nil 来判断元素是否存在</p>
</li>
<li><p>Mapi遍历</p>
<pre><code>m := map[string]int{&quot;one&quot;: 1}
for k, v := range m {
    t.Log(k, v)
}</code></pre></li>
<li><p>Mapi delete()函数</p>
</li>
<li><p>Go 的内置集合中没有 Set 实现， 可以 map[type]bool</p>
</li>
</ul>
<h5 id="字符串与字符编码"><a href="#字符串与字符编码" class="headerlink" title="字符串与字符编码"></a>字符串与字符编码</h5><p>字符串是只读不可变的byte slice</p>
<p>len()函数得出的是byte的长度而未必是字符长度。</p>
<p>rune()函数:得到unicode编码</p>
<p>常用的函数包：strings strconv<br>如：split join Atoi  itoA</p>
<h5 id="变量声明"><a href="#变量声明" class="headerlink" title="变量声明"></a>变量声明</h5><p>可单独声明，也可以一次声明多个变量：如</p>
<pre><code>var a string = &quot;Runoob&quot;
var b, c int = 1, 2</code></pre><ul>
<li><p>若没有初始化系统默认为0或者False或者”“</p>
</li>
<li><p>也可是不指定类型，系统自动识别</p>
</li>
<li><p>使用因式分解关键字写法</p>
<pre><code>var (  // 这种因式分解关键字的写法一般用于声明全局变量
  a int
  b bool
  )</code></pre></li>
<li><p>也可是省略var,使用:=来声明新变量</p>
<pre><code>vname1, vname2, vname3 := v1, v2, v3</code></pre></li>
</ul>
<h5 id="常量：iota"><a href="#常量：iota" class="headerlink" title="常量：iota"></a>常量：iota</h5><p> iota 在 const关键字出现时将被重置为 0(const 内部的第一行之前)，const 中每<font color="red">新增一行</font>常量声明将使 iota 计数一次</p>
<pre><code>package main
import &quot;fmt&quot;
func main() {
    const (
            a = iota   //0
            b          //1
            c          //2
            d = &quot;ha&quot;   //独立值，iota += 1
            e          //&quot;ha&quot;   iota += 1
            f = 100    //iota +=1
            g          //100  iota +=1
            h = iota   //7,恢复计数
            i          //8
    )
    fmt.Println(a,b,c,d,e,f,g,h,i)
}</code></pre><h6 id="记录"><a href="#记录" class="headerlink" title="记录"></a>记录</h6><pre><code>t.Logf(&quot;%T&quot;, aP)</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/03/python-GIL/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="躲不掉的风">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="躲不掉的风">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/02/03/python-GIL/" itemprop="url">Python-GIL&进程线程</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-02-03T18:27:32+08:00">
                2020-02-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h5 id="GIL-全局解释器锁"><a href="#GIL-全局解释器锁" class="headerlink" title="GIL 全局解释器锁"></a>GIL 全局解释器锁</h5><p>GIL本质就是一把互斥锁，既然是互斥锁，所有互斥锁的本质都一样，都是将并发运行变成串行，以此来控制同一时间内共享数据只能被一个任务所修改，进而保证数据安全。</p>
<h6 id="实例："><a href="#实例：" class="headerlink" title="实例："></a>实例：</h6><p>  使用死循环程序while True:pass</p>
<p>  双核CPU:可用htop实时查看进程占用情况</p>
<ul>
<li>单进程单线程执行1个线程   CPU1占满100%</li>
<li>单进程多线程执行两个线程   各占用50%（加起来是一个核）</li>
<li>使用多进程执行两个进程   各占满100%（每个进程真正占满一个核）</li>
</ul>
<h6 id="结论：python中多线程是假的。只有多进程能实现并发，每个进程占用一个CPU。"><a href="#结论：python中多线程是假的。只有多进程能实现并发，每个进程占用一个CPU。" class="headerlink" title="结论：python中多线程是假的。只有多进程能实现并发，每个进程占用一个CPU。"></a>结论：<font color="red">python中多线程是假的。只有多进程能实现并发</font>，每个进程占用一个CPU。</h6><h6 id="原因：GIL：使得多线程程序一个时刻只能有一个线程在使用。"><a href="#原因：GIL：使得多线程程序一个时刻只能有一个线程在使用。" class="headerlink" title="原因：GIL：使得多线程程序一个时刻只能有一个线程在使用。"></a>原因：<font color="red">GIL</font>：使得多线程程序一个时刻只能有一个线程在使用。</h6><p>为什么python有这个问题？</p>
<pre><code>实际不是python本身的问题，而是由于其解释器的限制：
Python默认使用C-python解释器（其他版本比如Java版的python解释器就不会有这个问题,但是这个GIL问题不容易解决所以至今依旧如此）</code></pre><p>所以python可使用多进程来实现多任务并发，替代多线程实现。</p>
<h5 id="多线程是否要比单线程快？"><a href="#多线程是否要比单线程快？" class="headerlink" title="多线程是否要比单线程快？"></a>多线程是否要比单线程快？</h5><p>回答：是的。因为多线程会在适当的实际执行必要的操作，避免等待造成的时间消耗。增加效率。</p>
<h5 id="什么时候用进程什么时候用线程？"><a href="#什么时候用进程什么时候用线程？" class="headerlink" title="什么时候用进程什么时候用线程？"></a>什么时候用进程什么时候用线程？</h5><ul>
<li><p>计算密集型程序：进程（可以发挥多核cpu的作用）</p>
</li>
<li><p>io密集型程序：线程、协程（可以充分利用等待时间）</p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/02/RT中的chrome设置/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="躲不掉的风">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="躲不掉的风">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/02/02/RT中的chrome设置/" itemprop="url">RT中的chrome设置</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-02-02T17:09:00+08:00">
                2020-02-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h5 id="1-jenkins在执行远程docker-chrome-hub运行RT时候报错："><a href="#1-jenkins在执行远程docker-chrome-hub运行RT时候报错：" class="headerlink" title="1.jenkins在执行远程docker chrome hub运行RT时候报错："></a>1.jenkins在执行远程docker chrome hub运行RT时候报错：</h5><pre><code>selenium.common.exceptions.WebDriverException: Message: unknown error: session deleted because of page crash
from unknown error: cannot determine loading status
from tab crashed</code></pre><ul>
<li>解决方法一</li>
</ul>
<p>一个解决办法就是要添加chrome参数Add the following chrome_options:</p>
<pre><code>chrome_options.add_argument(&apos;--no-sandbox&apos;)   </code></pre><p>参考：<a href="https://stackoverflow.com/questions/53902507/unknown-error-session-deleted-because-of-page-crash-from-unknown-error-cannot" target="_blank" rel="noopener">https://stackoverflow.com/questions/53902507/unknown-error-session-deleted-because-of-page-crash-from-unknown-error-cannot</a></p>
<h6 id="那么这些参数都有哪些意义呢？"><a href="#那么这些参数都有哪些意义呢？" class="headerlink" title="那么这些参数都有哪些意义呢？"></a>那么这些参数都有哪些意义呢？</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">from selenium import webdriver</span><br><span class="line">from selenium.webdriver.chrome.options import Options</span><br><span class="line">chrome_options = Options()</span><br><span class="line">chrome_options.add_argument(&apos;--no-sandbox&apos;)#停止使用沙箱模式（沙箱模式就是一个封闭的独立的环境。）,也可解决DevToolsActivePort文件不存在的报错</span><br><span class="line">chrome_options.add_argument(&apos;window-size=1920x3000&apos;) #指定浏览器分辨率</span><br><span class="line">chrome_options.add_argument(&apos;--disable-gpu&apos;) #谷歌文档提到需要加上这个属性来规避bug</span><br><span class="line">chrome_options.add_argument(&apos;--hide-scrollbars&apos;) #隐藏滚动条, 应对一些特殊页面</span><br><span class="line">chrome_options.add_argument(&apos;blink-settings=imagesEnabled=false&apos;) #不加载图片, 提升速度</span><br><span class="line">chrome_options.add_argument(&apos;--headless&apos;) #浏览器不提供可视化页面. linux下如果系统不支持可视化不加这条会启动失败</span><br><span class="line">chrome_options.binary_location = r&quot;C:\Program Files (x86)\Google\Chrome\Application\chrome.exe&quot; #手动指定使用的浏览器位置</span><br><span class="line"></span><br><span class="line">driver=webdriver.Chrome(chrome_options=chrome_options)</span><br><span class="line">driver.get(&apos;https://www.baidu.com&apos;)</span><br><span class="line"></span><br><span class="line">print(&apos;hao123&apos; in driver.page_source)</span><br><span class="line">driver.close() #切记关闭浏览器，回收资源</span><br></pre></td></tr></table></figure>

<h6 id="如何在RT中应用？"><a href="#如何在RT中应用？" class="headerlink" title="如何在RT中应用？"></a>如何在RT中应用？</h6><p>RT中添加需要转化成capabilities这样才可在使用远程driver的时候应用。</p>
<p>参考大神:<a href="https://stackoverflow.com/questions/46812155/how-to-run-headless-remote-chrome-using-robot-framework/46817149" target="_blank" rel="noopener">https://stackoverflow.com/questions/46812155/how-to-run-headless-remote-chrome-using-robot-framework/46817149</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Headless Chrome - Open Browser</span><br><span class="line">    $&#123;chrome_options&#125; =     Evaluate    sys.modules[&apos;selenium.webdriver&apos;].ChromeOptions()    sys, selenium.webdriver</span><br><span class="line">    Call Method    $&#123;chrome_options&#125;   add_argument    headless</span><br><span class="line">    Call Method    $&#123;chrome_options&#125;   add_argument    disable-gpu</span><br><span class="line">    $&#123;options&#125;=     Call Method     $&#123;chrome_options&#125;    to_capabilities     </span><br><span class="line"></span><br><span class="line">    Open Browser    http://cnn.com    browser=chrome    remote_url=http://localhost:4444/wd/hub     desired_capabilities=$&#123;options&#125;</span><br><span class="line"></span><br><span class="line">    Maximize Browser Window</span><br><span class="line">    Capture Page Screenshot</span><br></pre></td></tr></table></figure>

<p>解决方法二：方法一并没有有效的解决问题，以下贴出完整的问题log</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">[ WARN ] Keyword &apos;Capture Page Screenshot&apos; could not be run on failure: WebDriverException: Message: Session [0c86405952403c3719bb6d9e8467b7f9] was terminated due to BROWSER_TIMEOUT</span><br><span class="line">Stacktrace:</span><br><span class="line">    at org.openqa.grid.internal.ActiveTestSessions.getExistingSession (ActiveTestSessions.java:115)</span><br><span class="line">    at org.openqa.grid.internal.DefaultGridRegistry.getExistingSession (DefaultGridRegistry.java:387)</span><br><span class="line">    at org.openqa.grid.web.servlet.handler.RequestHandler.getSession (RequestHandler.java:241)</span><br><span class="line">    at org.openqa.grid.web.servlet.handler.RequestHandler.process (RequestHandler.java:123)</span><br><span class="line">    at org.openqa.grid.web.servlet.DriverServlet.process (DriverServlet.java:85)</span><br><span class="line">    at org.openqa.grid.web.servlet.DriverServlet.doGet (DriverServlet.java:63)</span><br><span class="line">    at javax.servlet.http.HttpServlet.service (HttpServlet.java:687)</span><br><span class="line">    at javax.servlet.http.HttpServlet.service (HttpServlet.java:790)</span><br><span class="line">    at org.seleniumhq.jetty9.servlet.ServletHolder.handle (ServletHolder.java:865)</span><br><span class="line">    at org.seleniumhq.jetty9.servlet.ServletHandler.doHandle (ServletHandler.java:535)</span><br><span class="line">    [ Message content over the limit has been removed. ]</span><br><span class="line">    at org.seleniumhq.jetty9.io.AbstractConnection$ReadCallback.succeeded (AbstractConnection.java:305)</span><br><span class="line">    at org.seleniumhq.jetty9.io.FillInterest.fillable (FillInterest.java:103)</span><br><span class="line">    at org.seleniumhq.jetty9.io.ChannelEndPoint$2.run (ChannelEndPoint.java:118)</span><br><span class="line">    at org.seleniumhq.jetty9.util.thread.strategy.EatWhatYouKill.runTask (EatWhatYouKill.java:333)</span><br><span class="line">    at org.seleniumhq.jetty9.util.thread.strategy.EatWhatYouKill.doProduce (EatWhatYouKill.java:310)</span><br><span class="line">    at org.seleniumhq.jetty9.util.thread.strategy.EatWhatYouKill.tryProduce (EatWhatYouKill.java:168)</span><br><span class="line">    at org.seleniumhq.jetty9.util.thread.strategy.EatWhatYouKill.run (EatWhatYouKill.java:126)</span><br><span class="line">    at org.seleniumhq.jetty9.util.thread.ReservedThreadExecutor$ReservedThread.run (ReservedThreadExecutor.java:366)</span><br><span class="line">    at org.seleniumhq.jetty9.util.thread.QueuedThreadPool.runJob (QueuedThreadPool.java:765)</span><br><span class="line">    at org.seleniumhq.jetty9.util.thread.QueuedThreadPool$2.run (QueuedThreadPool.java:683)</span><br><span class="line">    at java.lang.Thread.run (Thread.java:748)</span><br><span class="line">| FAIL |</span><br><span class="line">WebDriverException: Message: unknown error: session deleted because of page crash</span><br><span class="line">from unknown error: cannot determine loading status</span><br><span class="line">from tab crashed</span><br><span class="line">  (Session info: chrome=79.0.3945.79)</span><br></pre></td></tr></table></figure>

<p>解决方法：增加共享内存<br>虽然通过df -h 可以看到/dev/shm有7个多G的空间，但是容器默认配置共享空间是64M：”default-shm-size”: “64M”,使用docker for python 可以通过添加–shm-size参数来修改,官方参数说明</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shm_size (str or int) – Size of /dev/shm (e.g. 1G).</span><br></pre></td></tr></table></figure>

<p>参考<br><a href="https://github.com/elgalu/docker-selenium/issues/20" target="_blank" rel="noopener">https://github.com/elgalu/docker-selenium/issues/20</a><br><a href="https://www.zhihu.com/question/40125229?sort=created" target="_blank" rel="noopener">https://www.zhihu.com/question/40125229?sort=created</a><br><a href="https://blog.csdn.net/isea533/article/details/95197468" target="_blank" rel="noopener">https://blog.csdn.net/isea533/article/details/95197468</a><br><a href="https://www.cnblogs.com/FZfangzheng/p/10851762.html" target="_blank" rel="noopener">https://www.cnblogs.com/FZfangzheng/p/10851762.html</a><br><a href="https://docker-py.readthedocs.io/en/stable/containers.html" target="_blank" rel="noopener">https://docker-py.readthedocs.io/en/stable/containers.html</a></p>
<p>Finally:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">client.containers.run(&apos;selenium/hub&apos;, name=hub_name, detach=True, tty=True, stdin_open=True,publish_all_ports=True,shm_size=&apos;1G&apos;)</span><br></pre></td></tr></table></figure>

<h6 id="2-chrome远程下载"><a href="#2-chrome远程下载" class="headerlink" title="2. chrome远程下载"></a>2. chrome远程下载</h6><p>  解决：使用谷歌驱动获取远程下载路径文件列表</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">from openapi_utils import split_order, init_forder</span><br><span class="line">from robot.libraries.BuiltIn import BuiltIn</span><br><span class="line">def get_downloaded_files():</span><br><span class="line">    seleniumlib = BuiltIn().get_library_instance(&apos;SeleniumLibrary&apos;)</span><br><span class="line">    driver = seleniumlib.driver</span><br><span class="line">    if not driver.current_url.startswith(&quot;chrome://downloads&quot;):</span><br><span class="line">        driver.get(&quot;chrome://downloads/&quot;)</span><br><span class="line"></span><br><span class="line">    return driver.execute_script( \</span><br><span class="line">    &quot;return downloads.Manager.get().items_   &quot;</span><br><span class="line">    &quot;  .filter(e =&gt; e.state === &apos;COMPLETE&apos;)  &quot;</span><br><span class="line">    &quot;  .map(e =&gt; e.filePath || e.file_path); &quot; )</span><br></pre></td></tr></table></figure>

<h6 id="3-使用以上js下载脚本时一直提示这个错"><a href="#3-使用以上js下载脚本时一直提示这个错" class="headerlink" title="3. 使用以上js下载脚本时一直提示这个错"></a>3. 使用以上js下载脚本时一直提示这个错</h6><p>JavascriptException: Message: javascript error: Cannot read property ‘get’ of undefined<br>  (Session info: chrome=80.0.3987.122)</p>
<p>  原因是chrome版本的问题，可能是80版本不兼容，将版本将至79且禁止浏览器更新~</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/01/RT运行命令/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="躲不掉的风">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="躲不掉的风">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/02/01/RT运行命令/" itemprop="url">RT运行命令</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-02-01T20:20:11+08:00">
                2020-02-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h5 id="robot命令"><a href="#robot命令" class="headerlink" title="robot命令"></a>robot命令</h5><p>使用1：运行程序并生成报告</p>
<pre><code>robot -d Output --loglevel TRACE -v env:$env -v HUB:$hub -i $area SellerCenterUI/TestCase/06Wallet/</code></pre><p>使用2：重新运行失败的case</p>
<pre><code>robot -d Output --rerunfailed Output/output.xml --output rerun.xml --loglevel TRACE -v env:$env -v HUB:$hub  -i $area SellerCenterUI/TestCase/01Login/</code></pre><p>据robot –help可知</p>
<pre><code>-d  --outputdir dir       Where to create output files. The default is the directory where tests are run from and the given path   is considered relative to that unless it is absolute.即指定生成报告的文件
-L --loglevel level      Threshold level for logging. Available levels: TRACE,DEBUG, INFO (default), WARN, NONE (no logging).
 -i --include tag * 
 -v --variable name:value *      Set variables in the test data. Only scalar variables with string value are supported and name is given without `${}`.
  -R --rerunfailed output       Select failed tests from an earlier output file</code></pre><h5 id="rebot命令"><a href="#rebot命令" class="headerlink" title="rebot命令"></a>rebot命令</h5><p>使用：合并报告</p>
<pre><code>/usr/local/python3/bin/rebot -d Output --output output.xml --merge Output/output.xml Output/rerun.xml</code></pre><p>   使用rebot –help可知</p>
<pre><code>-o --output file         XML output file. Not created unless this option is specified. Given path, similarly as paths given to --log, --report and --xunit, is relative to --outputdir unless given as an absolute path.
-R --merge               When combining results, merge outputs together Example: rebot --merge orig.xml rerun.xml</code></pre><p>  最终根据xml文件生成Log和Report文件（个人理解）</p>
<pre><code>Output:  /var/lib/jenkins/workspace/Staging/login for th/Output/output.xml
Log:     /var/lib/jenkins/workspace/Staging/login for th/Output/log.html
Report:  /var/lib/jenkins/workspace/Staging/login for th/Output/report.html</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">躲不掉的风</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">81</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">躲不掉的风</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
